try {
  If(([string]::IsNullOrEmpty(${env:BOSH_PACKAGES_DIR}))) {
    $env:GOROOT=(Get-ChildItem -Path "C:\var\vcap\packages\golang-*-windows\go").FullName
  } Else {
    $BOSH_PACKAGES_DIR = Resolve-Path $env:BOSH_PACKAGES_DIR
    $env:GOROOT="${BOSH_PACKAGES_DIR}\golang-1.8-windows\go"
  }

  $env:GOPATH="${PWD}"
  $env:PATH="${env:GOROOT}\bin;${env:GOPATH}\bin;${env:PATH}"
  Exit 1
} catch {
  Write-Error $_.Exception.Message
  Exit 1
}

Exit 0


